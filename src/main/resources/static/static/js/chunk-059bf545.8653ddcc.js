(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-059bf545"],{"4acc":function(e,t,i){"use strict";var a=i("a7ea"),o=i.n(a);o.a},a7ea:function(e,t,i){},b775:function(e,t,i){"use strict";var a=i("bc3a"),o=i.n(a),s=o.a.create({baseURL:"http://120.92.114.123:8089",timeout:5e3});s.interceptors.request.use(function(e){return e},function(e){return console.log(e),Promise.reject()}),s.interceptors.response.use(function(e){if(200===e.status)return e.data;Promise.reject()},function(e){return console.log(e),Promise.reject()}),t["a"]=s},d02c:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-location"}),e._v(" 厂商管理")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"厂商名称/地址"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-lx-add"},on:{click:e.showAddManuf}},[e._v("添加")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.data,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"}}),i("el-table-column",{attrs:{prop:"name",label:"厂商名称",width:"150"}}),i("el-table-column",{attrs:{prop:"address",label:"地址"}}),i("el-table-column",{key:e.i,attrs:{label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleModifyPwd(t.row)}}},[e._v("修改密码")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.page_size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"edit_mauf_form",attrs:{rules:e.edit_rules,model:e.form,"label-width":"50px"}},[i("el-form-item",{attrs:{"label-width":"20%",label:"厂商名称",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"地址",prop:"address"}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"修改密码",visible:e.modifyPwdVisible,width:"30%"},on:{"update:visible":function(t){e.modifyPwdVisible=t}}},[i("el-form",{ref:"modify_pwd_form",attrs:{rules:e.modify_pwd_rules,model:e.modify_pwd_form,"label-width":"50px"}},[i("el-form-item",{attrs:{"label-width":"20%",label:"旧密码",prop:"old_pwd"}},[i("el-input",{attrs:{type:"password"},model:{value:e.modify_pwd_form.old_pwd,callback:function(t){e.$set(e.modify_pwd_form,"old_pwd",t)},expression:"modify_pwd_form.old_pwd"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"新密码",prop:"new_pwd"}},[i("el-input",{attrs:{type:"password"},model:{value:e.modify_pwd_form.new_pwd,callback:function(t){e.$set(e.modify_pwd_form,"new_pwd",t)},expression:"modify_pwd_form.new_pwd"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"确认密码",prop:"confirm_pwd"}},[i("el-input",{attrs:{type:"password"},model:{value:e.modify_pwd_form.confirm_pwd,callback:function(t){e.$set(e.modify_pwd_form,"confirm_pwd",t)},expression:"modify_pwd_form.confirm_pwd"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.modifyPwdVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.savePwd}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"添加厂商",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-form",{ref:"add_manuf_form",attrs:{rules:e.add_rules,model:e.form,"label-width":"50px"}},[i("el-form-item",{attrs:{"label-width":"20%",label:"厂商名称",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"地址",prop:"address"}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),i("el-form-item",{attrs:{"label-width":"20%",label:"确认密码",prop:"confirmPwd"}},[i("el-input",{attrs:{type:"password"},model:{value:e.form.confirmPwd,callback:function(t){e.$set(e.form,"confirmPwd",t)},expression:"form.confirmPwd"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addManuf()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"提示",visible:e.deleteRowVisible,width:"300px",center:""},on:{"update:visible":function(t){e.deleteRowVisible=t}}},[i("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteRowVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteManufs([e.form])}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"提示",visible:e.deleteAllVisible,width:"300px",center:""},on:{"update:visible":function(t){e.deleteAllVisible=t}}},[i("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteAllVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteManufs(e.multipleSelection)}}},[e._v("确 定")])],1)])],1)},o=[],s=(i("ac6a"),i("7f7f"),i("b775")),r={getManufList:function(e){return Object(s["a"])({url:"/manuf/pageList",method:"post",data:e})},addManuf:function(e){return Object(s["a"])({url:"/manuf/add",method:"post",data:e,headers:{token:localStorage.getItem("ms_token")}})},modifyPwd:function(e){return Object(s["a"])({url:"/manuf/modifyPwd",method:"post",data:e})},edit:function(e){return Object(s["a"])({url:"/manuf/edit",method:"post",data:e})},deleteManufs:function(e){return Object(s["a"])({url:"/manuf/deleteManufs",method:"post",data:e})}},l={name:"manufList",data:function(){var e=this;return{total:0,cur_page:1,page_size:10,select_word:"",tableData:[],addVisible:!1,deleteRowVisible:!1,deleteAllVisible:!1,editVisible:!1,modifyPwdVisible:!1,multipleSelection:[],form:{id:0,name:"",address:"",password:""},modify_pwd_form:{old_pwd:"",new_pwd:"",confirm_pwd:""},add_rules:{name:[{required:!0,message:"请输入厂商名称",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPwd:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(t,i,a){i!==e.form.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},edit_rules:{name:[{required:!0,message:"请输入厂商名称",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}]},modify_pwd_rules:{old_pwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirm_pwd:[{required:!0,message:"请输入确认密码",trigger:"blur"}]}}},created:function(){this.getData()},computed:{data:function(){var e=this;return this.tableData.filter(function(t){if(t.name.indexOf(e.select_word)>-1||t.address.indexOf(e.select_word)>-1)return t})}},methods:{delAll:function(){this.deleteAllVisible=!0},search:function(){},getData:function(){var e=this;r.getManufList({pageIndex:this.cur_page,pageSize:this.page_size}).then(function(t){"200"===t.code?(e.tableData=t.data.manufList,e.total=t.data.count):e.$message.error(t.message)})},addManuf:function(){var e=this;console.log("read_token:"+localStorage.getItem("ms_token")),this.$refs["add_manuf_form"].validate(function(t){t&&r.addManuf({name:e.form.name,address:e.form.address,password:e.form.password}).then(function(t){"200"===t.code?(e.addVisible=!1,e.$message.success("添加成功"),e.getData()):e.$message.error(t.message)})})},handleEdit:function(e){this.form={id:e.id,name:e.name,address:e.address},this.editVisible=!0},handleDelete:function(e){this.form=e,this.deleteRowVisible=!0},handleModifyPwd:function(e){this.modify_pwd_form={old_pwd:"",new_pwd:"",confirm_pwd:""},this.form={id:e.id},this.modifyPwdVisible=!0},handleCurrentChange:function(e){this.cur_page=e,this.getData()},handleSelectionChange:function(e){this.multipleSelection=e},showAddManuf:function(){this.form={id:0,name:"",address:"",password:""},this.addVisible=!0},saveEdit:function(){var e=this;console.log("id->"+this.form.id),r.edit({id:this.form.id,name:this.form.name,address:this.form.address}).then(function(t){"200"===t.code?(e.editVisible=!1,e.$message.success("修改成功"),e.getData()):e.$message.error(t.message)})},savePwd:function(){var e=this;r.modifyPwd({manufId:this.form.id,oldPwd:this.modify_pwd_form.old_pwd,newPwd:this.modify_pwd_form.new_pwd}).then(function(t){"200"===t.code?(e.modifyPwdVisible=!1,e.$message.success("密码修改成功")):e.$message.error(t.message)})},deleteManufs:function(e){var t=this,i=[];e.forEach(function(e){i.push(e.id)}),i.forEach(function(e){console.log(e)}),r.deleteManufs({manufIds:i}).then(function(e){"200"===e.code?(t.deleteRowVisible=!1,t.deleteAllVisible=!1,t.$message.success("删除成功！"),t.getData()):t.$message.error(e.message)})}}},n=l,d=(i("4acc"),i("2877")),c=Object(d["a"])(n,a,o,!1,null,"3b33d91a",null);t["default"]=c.exports}}]);